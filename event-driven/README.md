# Building Event-driven Microservices
> [이벤트 기반 마이크로서비스 구축](https://www.yes24.com/Product/Goods/99423020)


### Chapter 3. 통신 및 데이터 규약

#### p78 이벤트 포맷 선택
* Avro, ProtocolBuffer 같은 통제 가능한 Schema Evolution 지원이 가능한 명시적인 포맷을 추천하며, 텍스트 혹은 JSON 같은 포맷은 지양

#### p79 이벤트 설계
* 스트림 당 이벤트 정의는 하나만 사용 - 스키마 변경을 지양할 수 있도록 설계하라
* 가장 좁은 범위의 데이터 타입 사용 - 상수값이나 숫자 대신 enum 활용이 가능하다
* 이벤트는 하나의 목적만 갖도록 - 흔한 안티패턴 중에 하나이며, 비즈니스의 의미가 달라서 변화도 달라진다
  - 다만, 하나의 논리적인 테이블의 형태이고 다른 형태로 소비되는 것이라면 하나의 토픽도 적절하지 않을까?
  - 토픽이 달라지면 컨슈머도 따로 개발해야 하고 타입 별로 계속 늘어나게 되는데 결국 운영 유지보수 비용이 커질 수도 있다

> 프로그래밍 설계와 유사하게 향후 비즈니스의 변경 가능성이 큰지 여부에 따라 토픽으로 구분할 지, 스키마로 정의할 지 결정하면 좋겠다
> 변경될 가능성이 작고, 비즈니스가 단순한 적재(Stage) 토픽은 하나의 스트림에 다수의 스키마가 들어가는 것도 허용할 수도 있으나,
> 개별 스키마에 따라 비즈니스가 달라지고 향후 확장 가능성이 큰 저장(Store) 데이터의 경우에는 명시적으로 다른 토픽으로 관리하는 것이 좋겠다

